<!doctype html>
<html>
<head>
  <meta charset="utf-8"  />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112400982-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-112400982-1');
  </script>
  <!-- End Google Analytics -->
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/style.css">
  <meta name="viewport" content="width=device-width">
  <title>Mottak</title>
</head>
<body>
<div>
  <header class="header" role="banner">
    <div class="meta header-meta">
      <div class="header-bakgrunn"></div>
  
      <div class="header-meta-innhold">
        <div class="header-logo">
        </div>
  
        <div class="header-apptittel">
          <span class="header-applikasjonsnavn">Folkeregisteret</span>
          Api dokumentasjon
        </div>
      </div>
    </div>
  
    <div class="header-sidetittel">
      <h1>
        <span class="header-undertittel">Mottak</span>
      </h1>
    </div>
  </header>

  <div class="content">
    <div class="meta">
      <div class="sideblokk-seksjon navig">
        <div><a class="index" href="../om-tjenestene">Om tjenestene</a></div>
          <a href="../informasjonsfelter-og-statuskoder">Informasjonsfelter og statuskoder</a>
          <a href="../informasjonsmodell">Informasjonsmodell</a>
          <a href="../sikkerhet">Sikkerhet</a>
          <a href="../taushetsbelagte-opplysninger">Taushetsbelagte opplysninger</a>
          <a href="../versjonering">Versjonering</a>
        <div><a class="index" href="../produsenttjenester">Produsenttjenester</a></div>
          <a href="../mottak">Mottak</a>
          <a href="../tilbakemelding">Tilbakemelding</a>
        <div><a class="index" href="../konsumenttjenester">Konsumenttjenester</a></div>
          <a href="../avtaler">Avtaler</a>
          <a href="../funksjonell-beskrivelse">Funksjonell beskrivelse</a>
          <a href="../hendelsesliste">Hendelsesliste</a>
          <a href="../oppslag">Oppslag</a>
        <div><a class="index" href="../test">Test</a></div>
          <a href="../test-konsumenter">Test - konsumenter</a>
          <a href="../test-produsenter">Test - produsenter</a>
        <div><a class="index" href="../sp-rsm-l-og-svar">Spørsmål og svar</a></div>
      </div>
    </div>
    <div class="data">
      <div class="innhold-blokk">
        <div class="innhold-blokk-innhold">
          <h1 id="grensesnittbeskrivelse">Grensesnittbeskrivelse</h1>
    <p>REST-tjeneste for innsending av informasjon til Folkeregisteret. Dokument som kan sendes inn er representert i listen over ressurser under. For å sende inn et dokument brukes kommandoen POST mot riktig URL med dokumentet som body i innsendingen.</p>
    <p>Tjenestenes endepunkt: <br>
    <code>POST {miljø}/folkeregisteret/mottak/api/{ressurs}</code></p>
    <h2 id="ressurser">Ressurser</h2>
    <table>
    <thead>
    <tr>
    <th>ressurs</th>
    <th>kontrakt</th>
    <th>modell</th>
    <th>status</th>
    <th>tilbakemeldingshendelse</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>rekvisisjon_av_dnummer</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_1.0.xsd">xsd</a></td>
    <td></td>
    <td>utgått</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>rekvisisjon_av_dnummer_v3</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_3.0.xsd">xsd</a></td>
    <td></td>
    <td>utgått</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>rekvisisjon_av_dnummer_v4</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_4.0.xsd">xsd</a></td>
    <td><a href="../modeller/1499854129.jpg">jpg</a></td>
    <td>produksjon</td>
    <td>HendelserISakOmDNummerRekvisisjon_v4</td>
    </tr>
    <tr>
    <td>rekvisisjon_av_dnummer_v4.vedlegg</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_4.0.xsd">xsd</a></td>
    <td></td>
    <td>produksjon</td>
    <td>HendelserISakOmDNummerRekvisisjon_v4</td>
    </tr>
    <tr>
    <td>rekvisisjon_av_dnummer_v5</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_5.0.xsd">xsd</a></td>
    <td><a href="../modeller/1511792480.jpg">jpg</a></td>
    <td>produksjon</td>
    <td>HendelserISakOmDNummerRekvisisjon_v5</td>
    </tr>
    <tr>
    <td>rekvisisjon_av_dnummer_v5.vedlegg</td>
    <td><a href="../kontrakter/RekvisisjonAvDNummer_5.0.xsd">xsd</a></td>
    <td><a href="../modeller/1511792480.jpg">jpg</a></td>
    <td>produksjon</td>
    <td>HendelserISakOmDNummerRekvisisjon_v5</td>
    </tr>
    <tr>
    <td>doedsfall_v1</td>
    <td><a href="../kontrakter/MeldingOmDoedsfall_v1.0.xsd">xsd</a></td>
    <td><a href="../modeller/1478705212.png">png</a></td>
    <td>produksjon</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>annullering_av_doedsfall_v1</td>
    <td><a href="../kontrakter/MeldingOmAnnulleringAvDoedsfall_v1.0.xsd">xsd</a></td>
    <td><a href="../modeller/1510835122.jpg">jpg</a></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>endring_av_dnummerperson_v2</td>
    <td><a href="../kontrakter/MeldingOmEndringAvPersonMedDNummer_v2.0.xsd">xsd</a></td>
    <td></td>
    <td>produksjon</td>
    <td>HendelserISakOmEndringAvDNummerPerson_v1<br><b>Manuell</b>: HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>endring_av_dnummerperson_v3</td>
    <td><a href="../kontrakter/MeldingOmEndringAvPersonMedDNummer_v3.0.xsd">xsd</a></td>
    <td></td>
    <td>test</td>
    <td>HendelserISakOmEndringAvDNummerPerson_v1<br><b>Manuell</b>: HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>foedsel_v1</td>
    <td><a href="../kontrakter/Foedselsmelding_1.0.xsd">xsd</a></td>
    <td></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>kontaktopplysninger_doedsbo_v1</td>
    <td><a href="../kontrakter/MeldingOmKontaktopplysningerForDoedsbo_v1.0.xsd">xsd</a></td>
    <td><a href="../modeller/1485934541.png">png</a></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>separasjon_v1</td>
    <td><a href="../kontrakter/MeldingOmSeparasjon_v1.0.xsd">xsd</a></td>
    <td></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>skilsmisse_v1</td>
    <td><a href="../kontrakter/MeldingOmSkilsmisse_v1.0.xsd">xsd</a></td>
    <td></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    <tr>
    <td>innflytting_v1</td>
    <td><a href="../kontrakter/MeldingOmInnflytting_v1.0.xsd">xsd</a></td>
    <td></td>
    <td>test</td>
    <td>HendelserISakOmFolkeregistrering_v1</td>
    </tr>
    </tbody>
    </table>
    <p>Her finner du egen  <a href="../kontrakter/DigitalSignatur.xsd">xsd for kryptografisk signatur</a> av meldingene.</p>
    <h2 id="eksempler">Eksempler</h2>
    <p>Curl-kommando som kan benyttes for å teste tjenesten:</p>
    <p><code>$ curl -k -v -X HEAD --cert datakonsument.cer --key datakonsument.key &quot;https://folkeregisteret-api-ekstern.sits.no/folkeregisteret/mottak/api/rekvisisjon_av_dnummer_v4&quot;</code></p>
    <h3 id="statuskode-202">Statuskode 202</h3>
    <p>Sammen med statuskode 202 kommer en datastruktur som ser slik ut:</p>
    <pre><code class="lang-xml">
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
    &lt;meldingMottatt&gt;
      &lt;folkeregisterReferanse&gt;47956f5b-fa1e-447d-a62d-b6714bc1f120&lt;/folkeregisterReferanse&gt;
      &lt;avsendersMeldingsidentifikator&gt;unik-3efaf50b2a19&lt;/avsendersMeldingsidentifikator&gt;
    &lt;/meldingMottatt&gt;
    </code></pre>
    <h3 id="feilkoder">Feilkoder</h3>
    <p>Hvis statuskode ikke 202 men man får svar fra applikasjonen, så returneres en datastruktur som ser slik ut</p>
    <pre><code class="lang-xml">
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
    &lt;folkeregisterFeilmelding&gt;
      &lt;httpStatus&gt;403&lt;/httpStatus&gt;
      &lt;alvorlighetsgrad&gt;WARNING&lt;/alvorlighetsgrad&gt;
      &lt;feilkode&gt;ske.folkeregister.mottak.infrastructure.exceptions.KonsumentManglerTilgangException&lt;/feilkode&gt;
      &lt;feilmelding&gt;Produsent har ikke tilgang til å sende inn D_NUMMER_REKVISISJON_V4&lt;/feilmelding&gt;
      &lt;tilleggsinformasjon&gt;
      &lt;/tilleggsinformasjon&gt;
    &lt;/folkeregisterFeilmelding&gt;
    </code></pre>
    <table>
    <thead>
    <tr>
    <th>HTTP Statuskode</th>
    <th>Forklaring</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>400</td>
    <td>Innsendt melding er ikke gyldig XML, validerer ikke iht. XSD eller informasjon sendt i Authorization-header er ugyldig.</td>
    </tr>
    <tr>
    <td>401</td>
    <td>Autentiseringsinformasjon mangler.</td>
    </tr>
    <tr>
    <td>403</td>
    <td>Virksomheten er autentisert men mangler autorisasjon for den angitte tjenesten.</td>
    </tr>
    <tr>
    <td>404</td>
    <td>Feil uri brukt.</td>
    </tr>
    <tr>
    <td>406</td>
    <td>Oppgitt Accept-header inneholder ikke &#39;application/xml&#39;.</td>
    </tr>
    <tr>
    <td>429</td>
    <td>For mange kall er gjort på for kort tid. Vent i minimum antall ms. angitt i Retry-After-header før neste request utføres.</td>
    </tr>
    <tr>
    <td>500</td>
    <td>Feil i tjenesten. Vennligst prøv igjen seinere.</td>
    </tr>
    </tbody>
    </table>
    <h2 id="milj-er">Miljøer</h2>
    <table>
    <thead>
    <tr>
    <th>Miljø</th>
    <th>URL</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>Test</td>
    <td><a href="https://folkeregisteret-api-ekstern.sits.no/">https://folkeregisteret-api-ekstern.sits.no/</a></td>
    </tr>
    <tr>
    <td>Produksjon</td>
    <td><a href="https://folkeregisteret.api.skatteetaten.no/">https://folkeregisteret.api.skatteetaten.no/</a></td>
    </tr>
    </tbody>
    </table>
    <h2 id="multipart">Multipart</h2>
    <p>Innsending av Dnr-rekvisisjon med vedlegg på endepunktene &quot;.vedlegg&quot; må gjøres som en multipart-request.
    I all hovedsak er det en ordinær multipart med xml og vedlegg som hver sine deler av requesten men det er to krav:<br/>
    1) &quot;Name&quot; i Content-disposition for xml og vedlegg må være &#39;rekvisisjon&#39; og &#39;vedlegg&#39;.<br/>
    2) &quot;Filename&quot; i Content-disposition for vedlegg må matche filnavnet som er angitt i xml i feltet &#39;multipartnavn&#39; for identifikasjonsdokumentet.<br/></p>
    <p>Eks:
    POST <a href="http://folkeregisteret-api-ekstern.sits.no/folkeregisteret/mottak/api/rekvisisjon_av_dnummer_v5.vedlegg">http://folkeregisteret-api-ekstern.sits.no/folkeregisteret/mottak/api/rekvisisjon_av_dnummer_v5.vedlegg</a> HTTP/1.1<br/>
    Content-Type: multipart/form-data; boundary=ahmbD7nC0ZRm0ME0uKQXJKQHDWASO_Ur<br/>
    Host: folkeregisteret-api-ekstern.sits.no<br/>
    Expect: 100-continue<br/>
    Accept-Encoding: gzip, deflate<br/>
    Proxy-Connection: Keep-Alive<br/>
    <br/>
    --ahmbD7nC0ZRm0ME0uKQXJKQHDWASO_Ur<br/>
    Content-Disposition: form-data; name=&quot;rekvisisjon&quot;; filename=&quot;et-eller-annet-dnr_rekv.xml&quot;<br/>
    Content-Type: application/xml; charset=ISO-8859-1<br/>
    Content-Transfer-Encoding: binary<br/>
    <br/>
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;<br/></p>
    <p><rekvisisjonAvDNummer xmlns="folkeregisteret:melding:nyfolkeregisterperson:rekvisisjonavdnummer:v5"></p>
    <p><innsending></p>
    <p><avsendersMeldingsidentifikator>5a92c247afd2a3f24939.js?5a92c247afd2a3f24939</avsendersMeldingsidentifikator></p>
    <p><avsendersInnsendingstidspunkt>2018-09-01T15:04:47.719</avsendersInnsendingstidspunkt></p>
    <p><kildesystem>Skatteplikt</kildesystem></innsending></p>
    <p><forespoersel></p>
    <p><kandidat></p>
    <p><navn></p>
    <p><fornavn>irriterende</fornavn></p>
    <p><mellomnavn>treg</mellomnavn></p>
    <p><etternavn>fotgjenger</etternavn></navn>
    ...
    ...</p>
    <p><identifikasjon></p>
    <p><personidentifikasjon></p>
    <p><identifikasjonsnummer>01019023939</identifikasjonsnummer></p>
    <p><identifikasjonsnummertype>utenlandskIdentifikasjonsnummer</identifikasjonsnummertype></p>
    <p><utstederland>SWE</utstederland>
    </personidentifikasjon></p>
    <p><dokumentgrunnlag></p>
    <p><identifikasjonsdokumentnummer>11503415812</identifikasjonsdokumentnummer></p>
    <p><identifikasjonsdokumenttype>diplomatpass</identifikasjonsdokumenttype></p>
    <p><utstedernavn>Militz</utstedernavn></p>
    <p><utstederland>RWA</utstederland></p>
    <p><gyldigFra>2017-05-01</gyldigFra></p>
    <p><dokumentkopi><multipartnavn>pass2.pdf</multipartnavn></dokumentkopi><br></dokumentgrunnlag>
    </identifikasjon>
    ...
    </rekvisisjonAvDNummer>
    <br/>
    --ahmbD7nC0ZRm0ME0uKQXJKQHDWASO_Ur<br/>
    Content-Disposition: form-data; name=&quot;vedlegg1&quot;; filename=&quot;pass2.pdf&quot;<br/>
    Content-Type: text/plain; charset=ISO-8859-1<br/>
    Content-Transfer-Encoding: binary<br/>
    <br/>
    %PDF-1.4<br/></p>
    
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
