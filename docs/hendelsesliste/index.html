<!doctype html>
<html>
<head>
  <meta charset="utf-8"  />
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/style.css">
  <title>Hendelsesliste</title>
</head>
<body>
<div>
  <header class="header" role="banner">
    <div class="meta header-meta">
      <div class="header-bakgrunn"></div>

      <div class="header-meta-innhold">
        <div class="header-logo">
        </div>

        <div class="header-apptittel">
          <span class="header-applikasjonsnavn">Folkeregisteret</span>
          Api dokumentasjon
        </div>
      </div>
    </div>

    <div class="header-sidetittel">
      <h1>
        <span class="header-undertittel">Hendelsesliste</span>
      </h1>
    </div>
  </header>

  <div class="content">
    <div class="meta">
      <div class="sideblokk-seksjon navig">
        <div><a class="index" href="../om-tjenestene">Om tjenestene</a></div>
          <a href="../informasjonsfelter-og-statuskoder">Informasjonsfelter og statuskoder</a>
          <a href="../sikkerhet">Sikkerhet</a>
          <a href="../taushetsbelagte-opplysninger">Taushetsbelagte opplysninger</a>
          <a href="../versjonering">Versjonering</a>
        <div><a class="index" href="../produsenttjenester">Produsenttjenester</a></div>
          <a href="../mottak">Mottak</a>
          <a href="../tilbakemelding">Tilbakemelding</a>
        <div><a class="index" href="../konsumenttjenester">Konsumenttjenester</a></div>
          <a href="../hendelsesliste">Hendelsesliste</a>
          <a href="../oppslag">Oppslag</a>
      </div>
    </div>

    <div class="data">
      <div class="innhold-blokk">
        <div class="innhold-blokk-innhold">
          <h1 id="grensesnittbeskrivelse">Grensesnittbeskrivelse</h1>
<p>Tjenesten tilgjengeliggjør relevante endringer i registeret. Den tilbyr en feed med hendelser. Det er konsumentene som selv styrer sekvens på lesing og hvor mange hendelser man skal lese. Samme hendelser kan leses av flere systemer hos konsumentene og man kan lese hendelser så mange ganger man ønsker. Hendelseslista tilbyr en løs kobling mellom produsent og konsument. Målet er å ha et fleksibelt API for konsumentenebrukerne av Folkeregisterets opplysninger. Det eneste konsumentene selv MÅ holde orden på er en intern feed-peker som viser hvor langt man har lest i feeden.</p>
<p>I tillegg til å lese feeden, kan man også lese innhold i en enkelt hendelse.</p>
<p>Hendelseslisten kan navigeres gjennom sekvensnummer. Sidestørrelsen som returneres er fast satt til 1000.</p>
<p>Tjenesten er naturlig å se i sammenheng med tjenesten <a href="../oppslag">oppslag</a>. I feeden gis en peker til et persondokument. Dette er en nøkkel man kan bruke til å slå opp personen slik han så ut etter at hendelsen inntraff. 
Man kan også slå opp personen basert på fødsels- eller d-nummer.</p>
<p>For å nå tjenestene bygges URL opp slik:
{miljø}{rettighetspakke}{ressurs}</p>
<h2 id="ressurser">Ressurser</h2>
<table>
<thead>
<tr>
<th>Ressurs</th>
<th>Beskrivelse</th>
<th>Kontrakt</th>
</tr>
</thead>
<tbody>
<tr>
<td>hendelser/feed/{startsekvensnummer}</td>
<td>Liste med hendelser fra angitt startpunkt.</td>
<td>I henhold til <a href="http://www.ietf.org/rfc/rfc4287.txt">Atom spesifikasjonen</a>. <a href="../kontrakter/Folkeregisterhendelse_v1.xsd">Xsd for innhold i content</a></td>
</tr>
<tr>
<td>hendelser/{hendelsesidentifikator}</td>
<td>Datainnhold i en angitt hendelse</td>
<td><a href="../kontrakter/Hendelsedokument_v1.0.xsd">Hendelsesdokument_v1.0.xsd</a></td>
</tr>
</tbody>
</table>
<h2 id="rettighetspakker">Rettighetspakker</h2>
<table>
<thead>
<tr>
<th>Rettighetspakke</th>
<th>Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td>offentlig-med-hjemmel/api/</td>
<td>Rettighetspakke for offentlige aktører med hjemmel i egen lov som gir rett til folkeregisterdata.</td>
</tr>
</tbody>
</table>
<h2 id="milj-er">Miljøer</h2>
<table>
<thead>
<tr>
<th>Miljø</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Test</td>
<td><a href="https://folkeregisteret-api-ekstern.sits.no/">https://folkeregisteret-api-ekstern.sits.no/</a></td>
</tr>
<tr>
<td>Produksjon</td>
<td><a href="https://folkeregisteret.api.skatteetaten.no/">https://folkeregisteret.api.skatteetaten.no/</a></td>
</tr>
</tbody>
</table>
<h2 id="eksempler">Eksempler</h2>
<p>Oppslag i hendelsesliste: <br>
<code>https://folkeregisteret-api-ekstern.sits.no/offentlig-med-hjemmel/api/v1/hendelser/feed/1</code></p>
<p>Oppslag på en hendelse: <br>
<code>https://folkeregisteret-api-ekstern.sits.no/offentlig-med-hjemmel/api/v1/hendelser/7d9c19b1-4125-4968-b4dc-09cbaf3ac11f</code></p>
<p>Eksempel på curl-kommando som kan benyttes for å teste tjenesten: <br>
<code>$ curl -k -v -X HEAD --cert datakonsument.cer --key datakonsument.key &quot;https://folkeregisteret-api-ekstern.sits.no/folkregisteret/offentlig-med-hjemmel/api/v1/hendelser/feed/&quot;</code></p>
<h2 id="headere">Headere</h2>
<p><strong>Accept</strong></p>
<p>Verdien i denne headeren angir ønsket dataformat. Det er støtte for application/json (default) og application/xml</p>
<p><strong>If-None-Match</strong></p>
<p>Denne verdien skal settes lik <strong>ETag</strong>-header fra siste respons fra tjenesten. Se <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag">ETag</a> for mer informasjon om bruk av ETag.</p>
<h2 id="eksempler-p-respons-fra-tjenesten">Eksempler på respons fra tjenesten</h2>
<h3 id="hendelsesliste-format-json">Hendelsesliste - format JSON</h3>
<pre><code class="lang-json">[
  {
    &quot;sekvensnummer&quot;: 1,
    &quot;hendelse&quot;: {
      &quot;folkeregisteridentifikator&quot;: &quot;69028400470&quot;,
      &quot;hendelsestype&quot;: &quot;endringIIdentitetsgrunnlag&quot;,
      &quot;hendelsesdokument&quot;: &quot;55591b51b20518f4f22bf1edd6aa9f25&quot;,
      &quot;persondokument&quot;: &quot;8f475708c3d855defca884f4af6e49ae&quot;,
      &quot;ajourholdstidspunkt&quot;: &quot;2017-06-20T09:26:03.689+02:00&quot;
    }
  },
  {
    &quot;sekvensnummer&quot;: 2,
    &quot;hendelse&quot;: {
      &quot;folkeregisteridentifikator&quot;: &quot;69028400470&quot;,
      &quot;hendelsestype&quot;: &quot;endringIAnnenIdentifikasjon&quot;,
      &quot;hendelsesdokument&quot;: &quot;1120bea688fb14a292c244592a1aed76&quot;,
      &quot;persondokument&quot;: &quot;5c3afb4f5afd2fcfbe2f90a6560903a0&quot;,
      &quot;ajourholdstidspunkt&quot;: &quot;2017-06-20T09:26:03.689+02:00&quot;
    }
  }
]
</code></pre>
<h3 id="hendelsesliste-format-atom-xml">Hendelsesliste - format ATOM/XML</h3>
<pre><code class="lang-xml">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;
&lt;feed xmlns=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;id&gt;http://folkeregisteret.api.skatteetaten.no/folkeregisteret/offentlig-med-hjemmel/api/v1/hendelser/feed&lt;/id&gt;
  &lt;title&gt;Offentlig hendelsesliste&lt;/title&gt;
  &lt;author&gt;
    &lt;name&gt;Skatteetaten&lt;/name&gt;
  &lt;/author&gt;
  &lt;link rel=&#39;self&#39; type=&#39;application/atom+xml&#39; 
     href=&#39;http://folkeregisteret.api.skatteetaten.no/folkeregisteret/offentlig-med-hjemmel/api/v1/hendelser/feed?seq=1&#39;/&gt;
  &lt;link rel=&#39;first&#39; type=&#39;application/atom+xml&#39; 
     href=&#39;http://folkeregisteret.api.skatteetaten.no/folkeregisteret/offentlig-med-hjemmel/api/v1/hendelser/feed?seq=0&#39;/&gt;
  &lt;link rel=&#39;next&#39; type=&#39;application/atom+xml&#39; 
     href=&#39;http://folkeregisteret.api.skatteetaten.no/folkeregisteret/offentlig-med-hjemmel/api/v1/hendelser/feed?seq=1001&#39;/&gt;
  &lt;updated&gt;2017-11-13T13:40:08.485Z&lt;/updated&gt;
  &lt;entry xmlns:ns2=&quot;folkeregisteret:tilgjengeliggjoering:hendelse:v1&quot;&gt;
        &lt;title&gt;Hendelse&lt;/title&gt;
        &lt;id&gt;tag:skatteetaten.no,2017-10-10:folkeregisteret:tilgjengeliggjoering:hendelse:v1:1&lt;/id&gt;
        &lt;updated&gt;2017-10-10T14:06:57.59Z&lt;/updated&gt;
        &lt;content&gt;
              &lt;ns2:lagretHendelse&gt;
                    &lt;ns2:sekvensnummer&gt;1&lt;/ns2:sekvensnummer&gt;
                    &lt;ns2:hendelse&gt;
                          &lt;ns2:folkeregisteridentifikator&gt;69028400470&lt;/ns2:folkeregisteridentifikator&gt;
                          &lt;ns2:hendelsestype&gt;endringIIdentitetsgrunnlag&lt;/ns2:hendelsetype&gt;
                          &lt;ns2:hendelsesdokument&gt;55591b51b20518f4f22bf1edd6aa9f25&lt;/ns2:hendelsesdokument&gt;
                          &lt;ns2:persondokument&gt;8f475708c3d855defca884f4af6e49ae&lt;/ns2:persondokument&gt;
                          &lt;ns2:ajourholdstidspunkt&gt;2017-06-20T09:26:03.689+02:00&lt;/ns2:ajourholdstidspunkt&gt;
                    &lt;/ns2:hendelse&gt;
              &lt;/ns2:lagretHendelse&gt;
        &lt;/content&gt;
  &lt;/entry&gt;

  &lt;entry xmlns:ns2=&quot;folkeregisteret:tilgjengeliggjoering:hendelse:v1&quot;&gt;
        &lt;title&gt;Hendelse&lt;/title&gt;
        &lt;id&gt;tag:skatteetaten.no,2017-10-10:folkeregisteret:tilgjengeliggjoering:hendelse:v1:2&lt;/id&gt;
        &lt;updated&gt;2017-10-10T14:06:57.612Z&lt;/updated&gt;
        &lt;content&gt;
              &lt;ns2:lagretHendelse&gt;
                    &lt;ns2:sekvensnummer&gt;2&lt;/ns2:sekvensnummer&gt;
                    &lt;ns2:hendelse&gt;
                          &lt;ns2:folkeregisteridentifikator&gt;69028400470&lt;/ns2:folkeregisteridentifikator&gt;
                          &lt;ns2:hendelsestype&gt;endringIAnnenIdentifikasjon&lt;/ns2:hendelsetype&gt;
                          &lt;ns2:hendelsesdokument&gt;1120bea688fb14a292c244592a1aed76&lt;/ns2:hendelsesdokument&gt;
                          &lt;ns2:persondokument&gt;5c3afb4f5afd2fcfbe2f90a6560903a0&lt;/ns2:persondokument&gt;
                          &lt;ns2:ajourholdstidspunkt&gt;2017-06-20T09:26:03.689+02:00&lt;/ns2:ajourholdstidspunkt&gt;
                    &lt;/ns2:hendelse&gt;
              &lt;/ns2:lagretHendelse&gt;
        &lt;/content&gt;
  &lt;/entry&gt;
&lt;/feed&gt;
</code></pre>
<h3 id="hendelsesdokument-for-en-endring-format-json">Hendelsesdokument for en endring - format JSON</h3>
<pre><code class="lang-json">{
  &quot;dokumentidentifikator&quot;: &quot;1120bea688fb14a292c244592a1aed76&quot;,
  &quot;skjemaversjon&quot;: &quot;1.0&quot;,
  &quot;hendelse&quot;: {
    &quot;folkeregisteridentifikator&quot;: &quot;16117548867&quot;,
    &quot;hendelsestype&quot;: &quot;endringIAnnenIdentifikasjon&quot;,
    &quot;ajourholdstidspunkt&quot;: &quot;2014-01-02T00:00:00Z&quot;,
    &quot;egenskapshendelse&quot;: [
      {
        &quot;annenIdentifikasjon&quot;: {
          &quot;gyldighetstidspunkt&quot;: &quot;2017-04-18T10:32:18.312+02:00&quot;,
          &quot;kilde&quot;: &quot;kilde&quot;,
          &quot;aarsak&quot;: &quot;kontroll&quot;,
          &quot;identifikasjonsnummer&quot;: &quot;1234567890&quot;,
          &quot;identifikasjonsnummertype&quot;: &quot;utenlandskIdentifikasjonsnummer&quot;,
          &quot;utstederland&quot;: &quot;SWE&quot;
        },
        &quot;entitet&quot;: &quot;annenIdentifikasjon&quot;,
        &quot;entitetsendring&quot;: &quot;registrereNy&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="hendelsesdokument-for-en-korrigering-format-json">Hendelsesdokument for en korrigering - format JSON</h3>
<pre><code class="lang-json">{
  &quot;dokumentidentifikator&quot;: &quot;eb73af9403b0f5702e802ad4f9b8ca4e&quot;,
  &quot;skjemaversjon&quot;: &quot;1.0&quot;,
  &quot;hendelse&quot;: {
    &quot;folkeregisteridentifikator&quot;: &quot;16117548867&quot;,
    &quot;hendelsestype&quot;: &quot;endringIIdentitetsgrunnlag&quot;,
    &quot;ajourholdstidspunkt&quot;: &quot;2014-01-04T00:00:00Z&quot;,
    &quot;egenskapshendelse&quot;: [
      {
        &quot;identitetsgrunnlag&quot;: {
          &quot;gyldighetstidspunkt&quot;: &quot;2017-04-19T10:32:18.294+02:00&quot;,
          &quot;kilde&quot;: &quot;korrigert-gjeldende-kilde&quot;,
          &quot;identitetsgrunnlagstatus&quot;: &quot;kontrollert&quot;,
          &quot;dokumentgrunnlag&quot;: []
        },
        &quot;entitet&quot;: &quot;identitetsgrunnlag&quot;,
        &quot;entitetsendring&quot;: &quot;korrigere&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="hendelsesdokument-for-en-annullering-format-json">Hendelsesdokument for en annullering - format JSON</h3>
<pre><code class="lang-json">{
  &quot;dokumentidentifikator&quot;: &quot;c0e054f025e56d63b14f91fbb5abcb95&quot;,
  &quot;skjemaversjon&quot;: &quot;1.0&quot;,
  &quot;hendelse&quot;: {
    &quot;folkeregisteridentifikator&quot;: &quot;16117548867&quot;,
    &quot;hendelsestype&quot;: &quot;endringIAnnenIdentifikasjon&quot;,
    &quot;ajourholdstidspunkt&quot;: &quot;2014-01-05T00:00:00Z&quot;,
    &quot;egenskapshendelse&quot;: [
      {
        &quot;entitet&quot;: &quot;annenIdentifikasjon&quot;,
        &quot;entitetsendring&quot;: &quot;annullere&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="hendelsesdokument-for-en-korrigering-av-historisk-informasjon-format-json">Hendelsesdokument for en korrigering av historisk informasjon - format JSON</h3>
<pre><code class="lang-json">{
  &quot;dokumentidentifikator&quot;: &quot;d1428661e6f2c5c158bf954facdd3ba2&quot;,
  &quot;skjemaversjon&quot;: &quot;1.0&quot;,
  &quot;hendelse&quot;: {
    &quot;folkeregisteridentifikator&quot;: &quot;16117548867&quot;,
    &quot;hendelsestype&quot;: &quot;endringIIdentitetsgrunnlag&quot;,
    &quot;ajourholdstidspunkt&quot;: &quot;2014-01-04T00:00:00Z&quot;,
    &quot;egenskapshendelse&quot;: [
      {
        &quot;entitet&quot;: &quot;identitetsgrunnlag&quot;,
        &quot;entitetsendring&quot;: &quot;korrigereHistorisk&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="statuskode-304">Statuskode 304</h3>
<p>Statuskode 304 (<em>not modified</em>) returneres hvis kallet til tjenesten inkluderte headeren <strong>If-None-Match</strong> og denne er lik den aktuelle ETag for etterspurte ressurs. Det betyr at det ikke er kommet noen nye innslag på feeden siden forrige kall.</p>
<h3 id="feilkoder">Feilkoder</h3>
<p>Hvis statuskode hverken er 200 eller 304, men man får svar fra applikasjonen, så returneres en datastruktur som ser slik ut</p>
<pre><code class="lang-json">{
  &quot;kode&quot;: &quot;FREG-001&quot;,
  &quot;melding&quot;: &quot;Feil i tjenesten. Vennligst prøv igjen seinere.&quot;
}
</code></pre>
<table>
<thead>
<tr>
<th>HTTP Statuskode</th>
<th>Forklaring</th>
</tr>
</thead>
<tbody>
<tr>
<td>401</td>
<td>Autentiseringsinformasjon mangler</td>
</tr>
<tr>
<td>403</td>
<td>Virksomheten er autentisert men mangler autorisasjon for den angitte tjenesten</td>
</tr>
<tr>
<td>404</td>
<td>Feil uri brukt.</td>
</tr>
<tr>
<td>406</td>
<td>Oppgitt Accept-header inneholder ikke &#39;application/atom+xml&#39;, &#39;application/xml&#39; eller &#39;application/json&#39;</td>
</tr>
<tr>
<td>429</td>
<td>For mange kall er gjort på for kort tid. Vent i minimum antall ms. angitt i Retry-After-header før neste request utføres</td>
</tr>
<tr>
<td>500</td>
<td>Feil i tjenesten. Vennligst prøv igjen seinere.</td>
</tr>
</tbody>
</table>

        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>