<!doctype html>
<html>
<head>
  <meta charset="utf-8"  />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112400982-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-112400982-1');
  </script>
  <!-- End Google Analytics -->
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/style.css">
  <meta name="viewport" content="width=device-width">
  <title>Uttrekk</title>
</head>
<body>
<div>
  <header class="header" role="banner">
    <div class="meta header-meta">
      <div class="header-bakgrunn"></div>
  
      <div class="header-meta-innhold">
        <div class="header-logo">
        </div>
  
        <div class="header-apptittel">
          <span class="header-applikasjonsnavn">Folkeregisteret</span>
          Api dokumentasjon
        </div>
      </div>
    </div>
  
    <div class="header-sidetittel">
      <h1>
        <span class="header-undertittel">Uttrekk</span>
      </h1>
    </div>
  </header>

  <div class="content">
    <div class="meta">
      <div class="sideblokk-seksjon navig">
        <div><a class="index" href="../om-tjenestene">Om tjenestene</a></div>
          <a href="../informasjonsfelter-og-statuskoder">Informasjonsfelter og statuskoder</a>
          <a href="../informasjonsmodell">Informasjonsmodell</a>
          <a href="../sikkerhet">Sikkerhet</a>
          <a href="../taushetsbelagte-opplysninger">Taushetsbelagte opplysninger</a>
        <div><a class="index" href="../pakobling-til-freg">Påkobling FREG</a></div>
          <a href="../maskinporten">Maskinporten</a>
          <a href="../veileder-for-konsumenter">Veileder for konsumenter</a>
          <a href="../veileder-for-konsumenter-pa-vegne-av">Veileder for konsumenter - på vegne av</a>
          <a href="../veileder-for-systemleverandorer">Veileder for systemleverandører</a>
          <a href="../ytelse-og-responstider">Ytelse og responstider</a>
        <div><a class="index" href="../produsenttjenester">Produsenttjenester</a></div>
          <a href="../mottak">Mottak</a>
          <a href="../tilbakemelding">Tilbakemelding</a>
        <div><a class="index" href="../konsumenttjenester">Konsumenttjenester</a></div>
          <a href="../dataminimering">Dataminimering</a>
          <a href="../endepunkter">Endepunkter</a>
          <a href="../funksjonell-beskrivelse">Funksjonell beskrivelse</a>
          <a href="../hendelsesliste">Hendelsesliste</a>
          <a href="../oppslag">Oppslag</a>
          <a href="../uttrekk">Uttrekk</a>
        <div><a class="index" href="../test">Test</a></div>
          <a href="../test-for-konsumenter">Test for konsumenter</a>
          <a href="../test-for-produsenter">Test for produsenter</a>
        <div><a class="index" href="../sporsmal-og-svar">Spørsmål og svar</a></div>
      </div>
    </div>
    <div class="data">
      <div class="innhold-blokk">
        <div class="innhold-blokk-innhold">
          <h2 id="grensesnittbeskrivelse">Grensesnittbeskrivelse</h2>
    <p>Uttrekktjenesten gir tilgang til å hente ut et utvalg med personer basert på én eller flere kriterier, som for eksempel sekvensnummer, fødselsår, gatenavn, og kommune. Tjenestene er delt i 3 deler som utføres i rekkefølge:</p>
    <ol>
    <li>Bruk uttrekk/komplet eller uttrekk/tilpasset for å bestille ett uttrekk</li>
    <li>Bruk uttrekk/hent samme med et batchnummer for å hente resultatet av uttrekket. Resultatet er enten fødsel- eller d-nummer (fra tilpasset uttrekk) eller dokumentID (fra komplett uttrekk)</li>
    <li>Bruk <a href="../oppslag">bulkoppslag</a> for å hente personinformasjon</li>
    </ol>
    <p>Merk at JobbID returneres umiddelbart, men batchen er ikke nødvendigvis ferdig umiddelbart. Feilmelding 404 indikerer at jobbID ikke er ferdig. Det anbefales å bygge inn en retry-mekanisme med en delay mellom hvert forsøk.   </p>
    <p>Første batch har nummer 0, Komplett uttrekk vil dele batchene i 100 000 treff, mens tilpasset uttrekk deler batcher i 10 000 treff. Den siste batchen vil returnere svaret {}. Dette indikerer at det ikke er flere treff å hente.</p>
    <p>Følgende algoritme beskriver flyten for de tre tjenestene:</p>
    <pre><code>  jobbid = bestillUttrekk(sekvensnummer)
    
      batchteller = 0
      batch = hentResultat(jobbid, batchteller)
    
      while (batch.resultat &gt; 0) {
        persondokumenter = hentPersondokumenter(batch)
        // behandle persondokumenter
    
        batch = hentResultat(jobbid, ++batchteller)
      }
    </code></pre><h2 id="komplett-uttrekk">Komplett uttrekk</h2>
    <p>Hensikten med tjenesten er å tillate konsumenter å hente ned hele registeret fra et gitt tidspunkt. Tidspunktet er representert med et sekvensnummer. Alle persondokumentene som er gyldig ved sekvensnummeret, samt alle etterfølgende endringer vil returneres. 
    Tjenesten vil aldri benyttes til daglig vedlikehold av et register, men vil være nyttig i forholdelse med innlasting av en initiell befolkning. 
    <br>
    <br></p>
    <h2 id="tilpasset-uttrekk">Tilpasset uttrekk</h2>
    <p>Hensikten med denne POST-tjenesten er å tillate søk på grupper av personer. 
    Hvilke rettighetspakker som tjenesten er tilgjengelig for er beskrevet <a href="../konsumenttjenester">her.</a></p>
    <p>tabellen under beskriver hvilke muligheter for tilpassing av uttrekket som støttes.</p>
    <table>
    <thead>
    <tr>
    <th>Felt</th>
    <th>Beskrivelse av input</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>personstatustyper</td>
    <td>Gyldig input er: <br> &quot;aktiv&quot;, &quot;bosatt&quot;, &quot;utflyttet&quot;, &quot;doed&quot; og &quot;inaktiv&quot;. <br> Personstatusene midlertidig, ikkeBosatt, forsvunnet og fødselsregistrert dekkes av valget &quot;aktiv&quot;.</td>
    </tr>
    <tr>
    <td>bostedskommunenummer</td>
    <td>Søk på kommunenummer (fire siffer) kan ikke kombineres med oppholdskommunenummer</td>
    </tr>
    <tr>
    <td>oppholdskommunenummer</td>
    <td>Søk på kommunenummer (fire siffer) kan ikke kombineres med bostedskommunenummer</td>
    </tr>
    <tr>
    <td>foedselsaarFraOgMed</td>
    <td></td>
    </tr>
    <tr>
    <td>foedselsaarTilOgMed</td>
    <td></td>
    </tr>
    <tr>
    <td>doedsaarFraOgMed</td>
    <td></td>
    </tr>
    <tr>
    <td>doedsaarTilOgMed</td>
    <td></td>
    </tr>
    <tr>
    <td>kjoenn</td>
    <td>Gyldig input er &quot;kvinne&quot; eller &quot;mann&quot;</td>
    </tr>
    <tr>
    <td>statsborgerskap</td>
    <td>ISO 3166-1 alfa-3 (eksempel: &quot;BGR&quot;)</td>
    </tr>
    <tr>
    <td>sivilstandstype</td>
    <td>Gyldig input er: <br> &quot;uoppgitt&quot;, &quot;ugift&quot;, &quot;gift&quot;, &quot;enkeEllerEnkemann“, &quot;skilt&quot;, &quot;separert&quot;, &quot;registrertPartner&quot;, &quot;skiltPartner&quot;, &quot;separertPartner&quot;, &quot;gjenlevendePartner&quot;.</td>
    </tr>
    </tbody>
    </table>
    <h2 id="endepunkter">Endepunkter</h2>
    <p>For oppbygging av endepunkter se <a href="../endepunkter">her.</a></p>
    
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
